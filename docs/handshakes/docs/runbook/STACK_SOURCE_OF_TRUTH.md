🔧 Current stack (source of truth) TradingView indicator: WWASD_State_Emitter — v88 code is live Core lens: 1D 12‑EMA + Quarterly VWAP + H/L structure RSI (1D) block: rsi, rsi_overbought, rsi_oversold, rsi_50_up, rsi_50_down, regular OB/OS divergences only Macro: OTHERS.D vs STABLE.C.D with dead‑zone, trend.sig ∈ {BUY, SELL, HOLD} Ratings (v1): daily HTF score from components Base weights: Macro +0.8, Structure +0.6, Location +0.6 (guardrail: both EMA12 & QVWAP + supportive slope → +0.6, else +0.3), Trigger +0.4 (only with clean structure), Bias +0.2 (DO or Monday reclaim) Penalties: chasing OB/OS (−0.4), mid QVWAP + flat slope (−0.4), mixed H/L (−0.6) Normalized to 1..10. LTF block (present): 5m + 15m + 60m structure vote (≥2/3) with trigger/penalty mirroring HTF; output ltf.sig + ltf.rating. Bias: Monday range states (inside | dev_above | dev_below | reclaim_inside). Daily‑Open key is present unless I say otherwise. Alerts (append‑only, no breaking changes): Per‑bar close snapshot: type:"WWASD_STATE" (includes mtf, ctx, trend, htf{sig,rating,components}, and ltf{sig,rating}) Low‑spam RSI events: type:"WWASD_RSI_EVENT" A+ gate: type:"WWASD_A_PLUS" deduped 3 daily bars. No A+ rating floor—A+ fires on alignment (htf + trigger + bias), not a numeric cutoff. Relay (Render, Python Flask): wwasd-relay End points used by desks (must stay stable): /snap_raw.html?fresh_only=1&lists=green,full,macro (JSON lines rendered as HTML) /snap.csv?lists=... (flat table for bots) /tv/latest and /snap.json (JSON—some agents can’t fetch JSON; use HTML/CSV when needed) /port2_ssr.html (simple HTML for Port Desk) /blofin/latest (positions last pushed from local pusher) /health (simple OK + time, for liveness) Freshness: server treats snapshots as fresh if received ≤ FRESH_CUTOFF_SECS (env). Lightweight on‑disk cache for /tv/latest (env: TV_LATEST_CACHE_PATH). Local bridge / pusher (Windows Task Scheduler): Script: silent_push_blofin.vbs → calls push_positions.cmd → runs blofin_positions_pusher.py Trigger: At log on; Repeat every 2 minutes indefinitely; Run with highest privileges; Wake to run; Stop if on battery power unchecked. Action (correct form): Program/script: C:\Windows\System32\wscript.exe Add arguments: //B //Nologo "C:\Users\brand\OneDrive\Attachments\Desktop\wwasd_bridge_final\silent_push_blofin.vbs" Start in: C:\Users\brand\OneDrive\Attachments\Desktop\wwasd_bridge_final When it fires, /blofin/latest updates; relay snapshots tag fresh:true when within freshness window. 🧩 What’s working now WWASD_STATE payload contains rsi, ctx{above_do, mon_state}, trend{sig, source:"OTHERS_vs_STABLE"}, htf{sig,rating,components}, ltf{sig,rating}. Macro credit is parameterized via macroWeight (default 0.8). A+ pings present, deduped, no numeric A+ minimum (it’s purely alignment‑driven). CSV + HTML endpoints exist so desks that can’t fetch JSON can still screen. 🧪 How to verify quickly (do not change names/routes) Open /snap_raw.html?fresh_only=1&lists=green,full,macro — confirm rows show rsi, ctx, trend, htf, ltf, and recent server_received_ms. Open /blofin/latest — confirm positions and fresh:true. If Port reports “stale,” check Render Env: FRESH_CUTOFF_SECS and logs for recent GETs. If an agent can’t access JSON, point them to /snap.csv?... or /port2_ssr.html. 🧭 Guardrails (don’t break these) Do not rename the indicator or alert titles. Do not change endpoint paths/names. Append‑only schema in payloads. Keep the rating math and macro source exactly as above unless I ask. If we ever drop Daily‑Open, we will also remove any code paths referencing useDO to avoid compile errors. 📋 Open preferences Keep Daily‑Open present for now (Trader Mayne Monday state is mandatory; DO can be toggled later). LTF should mirror HTF logic (already implemented via 5/15/60 structure vote + triggers/penalties). No A+ minimum threshold—alignment drives A+. 🎯 What I want from you now (assistant) Keep the feed fresh. If any desk says “stale,” triage freshness window, last push time, and agent’s ability to read HTML/CSV. No rewrites. If you fix something, edit the minimal lines and show me the precise diff. If TradingView complains, give me the exact line numbers to edit. If Port can’t fetch JSON, hand them /snap.csv or /port2_ssr.html. If Blofin shows fresh:false but positions are open, confirm the pusher actually ran in the last 2–3 minutes and that Render logs show the POST/GETs. 🧷 Variables in Render (names only, values are set) AUTH_SHARED_SECRET, BLOFIN_API_KEY, BLOFIN_API_SECRET, BLOFIN_BASE_URL, BLOFIN_PASSPHRASE, FRESH_CUTOFF_SECS, TV_LATEST_CACHE_PATH, FULL_LIST, GREEN_LIST, MACRO_LIST 📎 Quick examples (no secrets) CSV screen: /snap.csv?lists=full&fresh_only=1 Raw HTML: /snap_raw.html?fresh_only=1&lists=green,full,macro Port SSR: /port2_ssr.html Latest TV cache: /tv/latest Blofin latest: /blofin/latest ✅ Definition of done for any fix Routes unchanged; payload still has type:"WWASD_STATE" etc. Desks can see fresh rows via HTML or CSV. No mass recreation of TradingView alerts required. You show me exactly what changed (file + line‑level diff). 📦 Attachments you can ask me for (if needed) app.py (current), .env (redacted), blofin_positions_pusher.py, push_positions.cmd, silent_push_blofin.vbs, scheduler screenshots, current WWASD_State_Emitter.pine. “Memory” & archived chats — what actually helps? New chats don’t see prior messages automatically. Archiving is mainly for you. What does help the assistant is a single living runbook (this prompt) plus the 3–4 canonical files attached each time (current app.py, .env sans secrets, Pine file, and the scheduler details). Keep the most recent stable prompt (this one) and the last known‑good code versions. You don’t need months of chat archives—just: The current runbook (this prompt), The last stable app.py and Pine, A short CHANGELOG (bullets with date + what changed), A recent Render logs snippet showing healthy GET/POSTs. If a future change is significant, update this prompt and your repo README so the next handoff remains frictionless.